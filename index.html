<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reality目标域名 · 本地工具</title>
  <style>
    :root {
      --fg: #2f3440; --bg: #f6f7f9; --card: #fff; --primary: #3a3f51; --border: #e3e6eb; --muted:#666;
    }
    .dark { --fg:#eaeef3; --bg:#0e1217; --card:#12161c; --primary:#4c89ff; --border:#263041; --muted:#9aa7b2; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, 'Helvetica Neue', Arial, 'Noto Sans SC', sans-serif; color: var(--fg); background: var(--bg); }
    .wrap { max-width: 980px; margin: 32px auto; padding: 0 16px; }
    h1 { font-size: 24px; margin: 0 0 8px; color: var(--fg); }
    .sub { color: var(--muted); margin-bottom: 16px; }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 10px; box-shadow: 0 6px 18px rgba(0,0,0,0.05); }
    .toolbar { display: flex; justify-content: space-between; gap: 8px; padding: 12px; border-bottom: 1px solid var(--border); }
    .btns { display:flex; gap:8px; }
    button { appearance: none; border: 1px solid var(--border); border-radius: 6px; padding: 6px 12px; cursor: pointer; background: #f7f9fb; color: #333; }
    .dark button { background:#1c2330; color:#eaeef3; border-color: var(--border); }
    button.primary { background: var(--primary); color: #fff; border-color: var(--primary); }
    button:active { transform: translateY(1px); }
    .body { padding: 0; }
    textarea { width: 100%; height: 220px; border: none; padding: 14px; resize: vertical; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; font-size: 13px; line-height: 1.6; background: #fafafa; border-radius: 0 0 10px 10px; }
    .dark textarea { background:#0f141b; color:#d9e2ec; }
    .row { display: flex; align-items: center; gap: 12px; padding: 12px; flex-wrap: wrap; }
    .row label { white-space: nowrap; color: var(--muted); }
    select, input[type="checkbox"] { padding: 6px 8px; border: 1px solid var(--border); border-radius: 6px; background: #fff; }
    .dark select { background:#0f141b; color:#d9e2ec; }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap:16px; padding:12px; }
    .grid .box { border-top: 1px dashed var(--border); padding-top: 10px; }
    .hint { padding: 12px; color: var(--muted); font-size: 12px; border-top: 1px dashed var(--border); }
    .stat { margin-left:auto; color: var(--muted); font-size:12px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Reality目标域名</h1>
    <div class="sub">扩展域名池、去重复、可自定义与固定、支持导出/暗色模式。</div>
    <div class="card">
      <div class="toolbar">
        <div class="btns">
          <button id="btnShuffle">换一批</button>
          <button id="btnCopy" class="primary">复制</button>
          <button id="btnExportTxt">导出txt</button>
          <button id="btnExportSh">导出sh</button>
          <button id="btnExportJson">导出json</button>
        </div>
        <div>
          <label style="margin-right:8px"><input id="toggleDark" type="checkbox"> 暗色模式</label>
          <span class="stat" id="poolStat"></span>
        </div>
      </div>
      <div class="row">
        <label for="count">域名数量</label>
        <select id="count">
          <option value="8">8</option>
          <option value="12" selected>12</option>
          <option value="16">16</option>
          <option value="20">20</option>
          <option value="30">30</option>
        </select>
        <label for="fmt">输出格式</label>
        <select id="fmt">
          <option value="bash" selected>bash检查脚本</option>
          <option value="list">仅域名列表</option>
          <option value="latency_issuer">bash时延+证书颁发者（示例样式）</option>
          <option value="latency">仅时延（domain: ms）</option>
        </select>
        <label style="margin-left:12px"><input id="toggleExact" type="checkbox"> 精确模式（示例集合）</label>
        <label style="margin-left:12px">固定种子 <input id="seed" type="text" placeholder="如 42" style="width:100px"></label>
        <label style="margin-left:12px">目标时延(ms) <input id="threshold" type="number" min="0" step="1" value="200" style="width:100px"></label>
      </div>
      <div class="body">
        <textarea id="scriptText" readonly></textarea>
      </div>
      <div class="box" style="padding:12px; border-top:1px dashed var(--border);">
        <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px; flex-wrap:wrap;">
          <strong>域名包选择</strong>
          <span style="color:var(--muted);font-size:12px;">按类别勾选合并（自动去重，持久化）</span>
          <span style="flex:1"></span>
          <button id="btnPacksAll">全选</button>
          <button id="btnPacksNone">清空</button>
        </div>
        <div id="packList" style="display:grid;grid-template-columns: repeat(3,1fr); gap:8px;"></div>
      </div>
      <div class="grid">
        <div class="box">
          <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px;">
            <strong>自定义域名导入</strong>
            <span style="color:var(--muted);font-size:12px;">支持逗号/空格/换行分隔</span>
          </div>
          <textarea id="customText" placeholder="粘贴你的域名列表..."></textarea>
          <div style="display:flex;gap:8px;margin-top:8px;">
            <button id="btnApplyCustom">应用并合并</button>
            <button id="btnClearCustom">清空自定义</button>
          </div>
        </div>
        <div class="box">
          <div style="display:flex;align-items:center;gap:8px;margin-bottom:6px;">
            <strong>固定保留域名</strong>
            <span style="color:var(--muted);font-size:12px;">生成时必包含，超出数量则取前N个</span>
          </div>
          <textarea id="fixedText" placeholder="例如：www.apple.com\nfonts.gstatic.com"></textarea>
          <div style="display:flex;gap:8px;margin-top:8px;">
            <button id="btnApplyFixed">应用固定</button>
            <button id="btnClearFixed">清空固定</button>
          </div>
        </div>
      </div>
      <div class="hint">
        - 生成时自动去重与规范化域名；池包含内置+自定义。<br>
        - 复制/导出均基于当前显示内容；设置会持久化保存在浏览器。<br>
        - 本页纯前端，无需外网依赖，可本地离线运行。
      </div>
    </div>
  </div>

<script>
  // —— 基础域名池（扩展版，精选常见 CDN/大站/云服务） ——
  const BASE_POOL = [
    // Microsoft / Xbox
    'go.microsoft.com','www.microsoft.com','login.microsoftonline.com','acctcdn.msftauth.net','store-images.s-microsoft.com','www.xbox.com','xboxlive.com',
    // Apple / iTunes / iCloud
    'www.apple.com','support.apple.com','init.itunes.apple.com','se-edge.itunes.apple.com','isl-ssl.mzstatic.com','api.apple-cloudkit.com','itunes.apple.com','cdn.apple-cloudkit.com',
    // Google / YouTube / Fonts / Gstatic
    'www.google.com','google.com','apis.google.com','ajax.googleapis.com','fonts.googleapis.com','fonts.gstatic.com','www.gstatic.com','www.youtube.com','i.ytimg.com','yt3.ggpht.com',
    // Cloudflare
    'cdn.cloudflare.net','static.cloudflareinsights.com','cloudflare.com','cdnjs.cloudflare.com',
    // GitHub
    'github.com','raw.githubusercontent.com','githubusercontent.com',
    // Amazon / AWS / CloudFront
    'aws.amazon.com','cloudfront.net','images-na.ssl-images-amazon.com','s3.amazonaws.com',
    // Telegram
    'api.telegram.org','telegram.org','t.me',
    // Akamai / Fastly / EdgeCast
    'akamaihd.net','akamaized.net','fastly.net','edgecastcdn.net',
    // Meta / Twitter / Reddit
    'facebook.com','fbcdn.net','instagram.com','cdninstagram.com','x.com','twitter.com','t.co','reddit.com','redd.it','redditmedia.com',
    // Streaming / Media
    'netflix.com','nflximg.net','spotify.com','api.spotify.com','soundcloud.com','scdn.co',
    // Dev / Docs
    'stackoverflow.com','stackexchange.com','cdn.sstatic.net','developer.mozilla.org','wikipedia.org','wikimedia.org',
    // Others（保持国际域名，不含国内）
    'quic.cloud','cdn77.org','cdn77.api.userway.org','downloadmirror.intel.com','d.impactradius-event.com','consent.trustarc.com','bitbucket.org','gitlab.com','vercel.com','cdn.vercel-insights.com','netlify.com','netlify.app','digitalocean.com','digitaloceanspaces.com','linode.com','oracle.com','oraclecloud.com','dropbox.com','dl.dropboxusercontent.com','box.com','onedrive.live.com','zoom.us','slack.com','notion.so','figma.com','openai.com','huggingface.co','cdn.huggingface.co','stripe.com','js.stripe.com','paypal.com','cdn.paypal.com','shopify.com','cdn.shopify.com','steampowered.com','steamcommunity.com','steamstatic.com','playstation.com','sonyentertainmentnetwork.com','epicgames.com','cdn1.epicgames.com'
  ];

  // —— 示例集合（与截图一致的域名顺序） ——
  const EXACT_PRESET = [
    'go.microsoft.com','acctcdn.msftauth.net','se-edge.itunes.apple.com','isl-ssl.mzstatic.com','consent.trustarc.com','d.impactradius-event.com','cdn77.api.userway.org','www.xbox.com','store-images.s-microsoft.com','downloadmirror.intel.com'
  ];

  // —— 扩展域名包（分类） ——
  const PACKS = [
    { key:'ms', name:'Microsoft/Windows/Xbox', domains:[
      'microsoft.com','www.microsoft.com','aka.ms','live.com','outlook.com','office.com','windows.com','windowsupdate.com','msauth.net','msftauth.net','visualstudio.com','azureedge.net','edgesuite.net','xbox.com','xboxlive.com','bing.com','skype.com'
    ]},
    { key:'apple', name:'Apple/iTunes/iCloud', domains:[
      'apple.com','www.apple.com','developer.apple.com','cdn.apple-cloudkit.com','icloud.com','itunes.apple.com','mzstatic.com','aod.itunes.apple.com','updates-http.cdn-apple.com'
    ]},
    { key:'google', name:'Google/YouTube/Gstatic', domains:[
      'google.com','www.google.com','accounts.google.com','apis.google.com','ajax.googleapis.com','googleapis.com','storage.googleapis.com','dl.google.com','gstatic.com','fonts.googleapis.com','fonts.gstatic.com','www.gstatic.com','youtube.com','www.youtube.com','youtu.be','i.ytimg.com','yt3.ggpht.com'
    ]},
    { key:'cloudflare', name:'Cloudflare/CDNJS', domains:[
      'cloudflare.com','cdn.cloudflare.net','cloudflareinsights.com','static.cloudflareinsights.com','cdnjs.cloudflare.com','cf-ipfs.com'
    ]},
    { key:'github', name:'GitHub/Gist', domains:[
      'github.com','gist.github.com','raw.githubusercontent.com','githubusercontent.com','avatars.githubusercontent.com','codeload.github.com'
    ]},
    { key:'aws', name:'Amazon/AWS/CloudFront/S3', domains:[
      'amazon.com','aws.amazon.com','cloudfront.net','s3.amazonaws.com','s3.us-east-1.amazonaws.com','s3-us-west-1.amazonaws.com','awsstatic.com'
    ]},
    { key:'telegram', name:'Telegram', domains:[
      't.me','telegram.org','api.telegram.org','tg.dev'
    ]},
    { key:'cdn', name:'CDN/Akamai/Fastly/EdgeCast', domains:[
      'akamaihd.net','akamaized.net','edgekey.net','edgesuite.net','fastly.net','cdnfastly.com','edgecastcdn.net','quic.cloud','jsdelivr.net','unpkg.com','staticfile.org'
    ]},
    { key:'social', name:'Meta/Twitter/Reddit', domains:[
      'facebook.com','fbcdn.net','instagram.com','cdninstagram.com','whatsapp.com','x.com','twitter.com','t.co','reddit.com','redd.it','redditmedia.com'
    ]},
    { key:'stream', name:'Streaming/Media', domains:[
      'netflix.com','nflximg.net','nflxvideo.net','hulu.com','spotify.com','api.spotify.com','scdn.co','soundcloud.com'
    ]},
    { key:'dev', name:'Dev/Docs', domains:[
      'stack Overflow.com'.toLowerCase(),'stackexchange.com','cdn.sstatic.net','developer.mozilla.org','mozilla.org','w3.org','w3schools.com','pkg.go.dev','pypi.org','files.pythonhosted.org','rubygems.org','registry.npmjs.org','npmjs.com','yarnpkg.com'
    ]},
    // 扩展：国际云/部署平台
    { key:'cloud2', name:'Vercel/Netlify/DO/Linode/Oracle', domains:[
      'vercel.com','vercel-insights.com','cdn.vercel-insights.com','netlify.com','netlify.app','digitalocean.com','digitaloceanspaces.com','linode.com','linodeusercontent.com','oracle.com','oraclecloud.com'
    ]},
    // 扩展：协作/生产力
    { key:'collab', name:'Slack/Zoom/Notion/Figma/Atlassian', domains:[
      'slack.com','zoom.us','notion.so','figma.com','atlassian.com','bitbucket.org','jira.atlassian.com','confluence.atlassian.com'
    ]},
    // 扩展：代码平台
    { key:'dev2', name:'GitLab/Skypack/Deno', domains:[
      'gitlab.com','gitlab-static.net','cdn.skypack.dev','deno.land','deno.com'
    ]},
    // 扩展：支付/电商
    { key:'payments', name:'Stripe/PayPal/Shopify', domains:[
      'stripe.com','js.stripe.com','paypal.com','cdn.paypal.com','shopify.com','cdn.shopify.com'
    ]},
    // 扩展：AI/ML
    { key:'ai', name:'OpenAI/HuggingFace/Replicate', domains:[
      'openai.com','huggingface.co','cdn.huggingface.co','replicate.com','anthropic.com'
    ]},
    // 扩展：游戏/娱乐
    { key:'gaming', name:'Steam/PlayStation/Epic', domains:[
      'steampowered.com','steamcommunity.com','steamstatic.com','playstation.com','sonyentertainmentnetwork.com','epicgames.com','cdn1.epicgames.com'
    ]}
  ];

  // —— 工具与状态 ——
  const LS_KEY = 'reality.settings.v1';
  let customSet = new Set();
  let fixedSet = new Set();
  let selectedPacks = new Set();

  const domainRegex = /^(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z]{2,}$/; // 简易校验

  function normalizeDomain(d) {
    if (!d) return '';
    let s = String(d).trim().toLowerCase();
    s = s.replace(/^https?:\/\//,'');
    s = s.split('/')[0].split('?')[0].split('#')[0];
    s = s.replace(/:\d+$/,'');
    return s.replace(/\.$/,'');
  }

  function parseInput(text) {
    const parts = String(text||'').split(/\s|,|;|\n|\r/).map(normalizeDomain).filter(Boolean);
    return parts.filter(d => domainRegex.test(d));
  }

  function buildPool() {
    const pool = new Set();
    BASE_POOL.forEach(d => pool.add(normalizeDomain(d)));
    // 选中的包
    PACKS.forEach(p => { if (selectedPacks.has(p.key)) p.domains.forEach(d => pool.add(normalizeDomain(d))); });
    customSet.forEach(d => pool.add(d));
    return [...pool];
  }

  function pickRandomWithFixed(count, seed) {
    const fixed = [...fixedSet];
    const pool = buildPool().filter(d => !fixedSet.has(d));
    // 随机洗牌（支持固定种子）
    const shuffled = (typeof shuffleSeeded === 'function')
      ? shuffleSeeded(pool, seed)
      : [...pool].sort(() => Math.random() - 0.5);
    const take = Math.max(0, count - fixed.length);
    const selection = fixed.slice(0, count).concat(shuffled.slice(0, take));
    // 最终再去重
    return [...new Set(selection)].slice(0, count);
  }

  function buildBash(domains) {
    const list = domains.join(' ');
    return `for d in ${list} ; do t1=$(date +%s%3N); timeout 1 openssl s_client -connect "$d:443" -servername "$d" < /dev/null 2>/dev/null | sed -n "/issuer/ {s/.*CN = //; p}" ; done`;
  }
  function buildList(domains) { return domains.join('\n'); }

  // 与截图一致：先测握手时延，再打印证书链颁发者 CN
  function buildBashLatencyIssuer(domains, thr) {
    const list = domains.join(' ');
    const loop1 = `for d in ${list} ; do t1=$(date +%s%3N); if timeout 2 openssl s_client -connect "$d:443" -servername "$d" < /dev/null >/dev/null 2>&1 ; then t2=$(date +%s%3N); dur=$((t2 - t1)); if [ $dur -lt ${thr} ]; then echo "$d: \${dur} ms"; fi; fi; done`;
    const loop2 = `for d in ${list} ; do timeout 2 openssl s_client -connect "$d:443" -servername "$d" < /dev/null 2>/dev/null | sed -n "/issuer/ {s/.*CN = //; p}" ; done`;
    return loop1 + "\n\n" + loop2;
  }

  // 仅时延（无论成功与否都计算耗时）
  function buildBashLatency(domains, thr) {
    const list = domains.join(' ');
    return `for d in ${list} ; do t1=$(date +%s%3N); if timeout 2 openssl s_client -connect "$d:443" -servername "$d" < /dev/null >/dev/null 2>&1 ; then t2=$(date +%s%3N); dur=$((t2 - t1)); if [ $dur -lt ${thr} ]; then echo "$d: \${dur} ms"; fi; fi; done`;
  }

  function render() {
    const count = parseInt(document.getElementById('count').value, 10);
    const fmt = document.getElementById('fmt').value;
    const seed = document.getElementById('seed').value.trim();
    const thr = parseInt(document.getElementById('threshold').value, 10) || 200;
    const useExact = document.getElementById('toggleExact').checked;
    const domains = useExact ? [...EXACT_PRESET] : pickRandomWithFixed(count, seed);
    let text = '';
    if (fmt === 'bash') text = buildBash(domains);
    else if (fmt === 'list') text = buildList(domains);
    else if (fmt === 'latency_issuer') text = buildBashLatencyIssuer(domains, thr);
    else if (fmt === 'latency') text = buildBashLatency(domains, thr);
    document.getElementById('scriptText').value = text;
    const extra = useExact ? ` · 精确模式：${EXACT_PRESET.length}个` : (seed ? ` · 种子：${seed}` : '');
    document.getElementById('poolStat').textContent = `域名池：${buildPool().length} 个（含去重，包${selectedPacks.size}/${PACKS.length}）${extra}`;
    saveSettings();
  }

  async function copyText() {
    const el = document.getElementById('scriptText');
    const text = el.value;
    try { await navigator.clipboard.writeText(text); toast('已复制到剪贴板'); }
    catch { el.select(); document.execCommand('copy'); toast('已复制到剪贴板'); }
  }

  function exportFile(type) {
    const count = parseInt(document.getElementById('count').value, 10);
    const fmt = document.getElementById('fmt').value;
    const domains = pickRandomWithFixed(count);
    let name = `reality_domains_${Date.now()}.${type}`;
    let content = '';
    if (type === 'txt') content = buildList(domains);
    if (type === 'sh') content = buildBash(domains);
    if (type === 'json') content = JSON.stringify({ domains, format: fmt, generatedAt: new Date().toISOString() }, null, 2);
    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = name; a.click(); URL.revokeObjectURL(url);
    toast('已导出 ' + name);
  }

  function toast(msg) {
    const tip = document.createElement('div');
    tip.textContent = msg;
    Object.assign(tip.style, { position:'fixed', left:'50%', top:'20px', transform:'translateX(-50%)', background:'#333', color:'#fff', padding:'8px 12px', borderRadius:'6px', fontSize:'12px', zIndex:9999, boxShadow:'0 6px 18px rgba(0,0,0,.15)' });
    document.body.appendChild(tip);
    setTimeout(() => tip.remove(), 1600);
  }

  function applyCustom() {
    const list = parseInput(document.getElementById('customText').value);
    customSet = new Set(list);
    toast(`已应用自定义 ${customSet.size} 个`);
    render();
  }
  function clearCustom() { customSet.clear(); document.getElementById('customText').value=''; render(); }

  function applyFixed() {
    const list = parseInput(document.getElementById('fixedText').value);
    fixedSet = new Set(list);
    toast(`已设置固定 ${fixedSet.size} 个`);
    render();
  }
  function clearFixed() { fixedSet.clear(); document.getElementById('fixedText').value=''; render(); }

  function saveSettings() {
    const settings = {
      count: document.getElementById('count').value,
      fmt: document.getElementById('fmt').value,
      dark: document.getElementById('toggleDark').checked,
      customText: document.getElementById('customText').value,
      fixedText: document.getElementById('fixedText').value,
      selectedPacks: [...selectedPacks],
      exact: document.getElementById('toggleExact').checked,
      seed: document.getElementById('seed').value,
      threshold: document.getElementById('threshold').value,
    };
    try { localStorage.setItem(LS_KEY, JSON.stringify(settings)); } catch {}
  }
  function loadSettings() {
    try {
      const raw = localStorage.getItem(LS_KEY);
      if (!raw) return;
      const s = JSON.parse(raw);
      document.getElementById('count').value = s.count || '12';
      document.getElementById('fmt').value = s.fmt || 'bash';
      document.getElementById('toggleDark').checked = !!s.dark;
      if (s.dark) document.body.classList.add('dark');
      document.getElementById('customText').value = s.customText || '';
      document.getElementById('fixedText').value = s.fixedText || '';
      customSet = new Set(parseInput(s.customText));
      fixedSet = new Set(parseInput(s.fixedText));
      selectedPacks = new Set((s.selectedPacks||[]).filter(k => PACKS.some(p => p.key===k)));
      document.getElementById('toggleExact').checked = !!s.exact;
      document.getElementById('seed').value = s.seed || '';
      document.getElementById('threshold').value = s.threshold || '200';
    } catch {}
  }

  function toggleDarkMode() {
    const on = document.getElementById('toggleDark').checked;
    document.body.classList.toggle('dark', on);
    saveSettings();
  }

  // —— 动态生成包选择 UI ——
  function renderPackList() {
    const box = document.getElementById('packList');
    box.innerHTML = '';
    PACKS.forEach(p => {
      const id = 'pack_'+p.key;
      const label = document.createElement('label');
      label.style.display = 'flex';
      label.style.alignItems = 'center';
      label.style.gap = '8px';
      label.style.padding = '6px 8px';
      label.style.border = '1px solid var(--border)';
      label.style.borderRadius = '6px';
      label.style.background = 'var(--card)';
      label.innerHTML = `<input type="checkbox" id="${id}"> <span>${p.name}</span>`;
      box.appendChild(label);
      const cb = label.querySelector('input');
      cb.checked = selectedPacks.has(p.key);
      cb.addEventListener('change', () => { if(cb.checked) selectedPacks.add(p.key); else selectedPacks.delete(p.key); render(); });
    });
  }
  function packsAll() { selectedPacks = new Set(PACKS.map(p=>p.key)); renderPackList(); render(); }
  function packsNone() { selectedPacks.clear(); renderPackList(); render(); }

  document.getElementById('btnShuffle').addEventListener('click', render);
  document.getElementById('btnCopy').addEventListener('click', copyText);
  document.getElementById('btnExportTxt').addEventListener('click', () => exportFile('txt'));
  document.getElementById('btnExportSh').addEventListener('click', () => exportFile('sh'));
  document.getElementById('btnExportJson').addEventListener('click', () => exportFile('json'));
  document.getElementById('btnApplyCustom').addEventListener('click', applyCustom);
  document.getElementById('btnClearCustom').addEventListener('click', clearCustom);
  document.getElementById('btnApplyFixed').addEventListener('click', applyFixed);
  document.getElementById('btnClearFixed').addEventListener('click', clearFixed);
  document.getElementById('count').addEventListener('change', render);
  document.getElementById('fmt').addEventListener('change', render);
  document.getElementById('toggleDark').addEventListener('change', toggleDarkMode);
  document.getElementById('toggleExact').addEventListener('change', render);
  document.getElementById('seed').addEventListener('input', () => { /*节流可选*/ render(); });
  document.getElementById('threshold').addEventListener('input', render);
  document.getElementById('btnPacksAll').addEventListener('click', packsAll);
  document.getElementById('btnPacksNone').addEventListener('click', packsNone);

  document.addEventListener('DOMContentLoaded', () => { loadSettings(); renderPackList(); render(); });
</script>
</body>
</html>
</h1>连接服务器ssh root@154.205.159.223 -p 22</h1>
</h1> 安装S-UI
VERSION=1.2.2 && bash <(curl -Ls https://raw.githubusercontent.com/alireza0/s-ui/$VERSION/install.sh) $VERSION</h1>
  <p>Windows/Mac（v2rayN）：<a href="https://github.com/2dust/v2rayN/releases/tag/7.12.7</a><br>Android（NekoBox）：<a href="https://github.com/MatsuriDayo/NekoBoxForAndroid/releases/tag/1.3.9</a><br>IOS/Mac（shadowrocket）：<a href="https://apps.apple.com/app/shadowrocket/id932747118</a></p>

